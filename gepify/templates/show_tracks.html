{% extends "layout.html" %}

{% block content %}
  <img src="{{ playlist['image'] }}" class="center-block" width="300" height="300" />
  <h2 class="subtitle">{{ playlist['name'] }}</h2>

  {% if playlist['description'] %}
    <h3 class="description">{{ playlist['description'] }}</h3>
  {% endif %}

  <table class="table table-striped">
  {% for track in playlist['tracks'] %}
    <tr>
      <td>
        {{ track['name'] }}
      </td>
      {% for format in SUPPORTED_FORMATS %}
        <td>
          <a href="{{ url_for('{}.download_song'.format(service), format=format, song_name=track['name']) }}"
             class="download-song label {{ 'label-success' if format in track['files'].keys() else 'label-default' }}">
            {{ format }}
          </a>
        </td>
      {% endfor %}
    </tr>
  {% endfor %}
  </table>

  <h3 class="download-title">Download playlist</h3>
  <form action="{{ url_for('{}.download_playlist'.format(service)) }}" method="POST" class="form-horizontal">
    <div class="form-group">
      <label for="format" class="col-sm-2 control-label">Format</label>
      <div class="col-sm-10">
        <select name="format" class="form-control">
          {% for format in SUPPORTED_FORMATS %}
            <option value="{{ format }}">{{ format }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <input type="hidden" name="playlist_id" value="{{ playlist['id'] }}">

    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-default">
          <span class="glyphicon glyphicon-floppy-save" aria-hidden="true"></span>
          Download
        </button>
      </div>
    </div>
  </form>
{% endblock %}
